No,Category,Guideline,指导方针,Description,描述,Do,推荐做法,Don't,不推荐做法,Code Good,良好代码,Code Bad,不良代码,Severity,Docs URL
1,路由 | Routing,Use App Router for new projects,新项目使用 App Router,App Router is the recommended approach in Next.js 14+,App Router 是 Next.js 14+ 推荐的方法,app/ directory with page.tsx,使用 app/ 目录和 page.tsx,pages/ for new projects,新项目使用 pages/,app/dashboard/page.tsx,app/dashboard/page.tsx,pages/dashboard.tsx,pages/dashboard.tsx,中等 | Medium,https://nextjs.org/docs/app
2,路由 | Routing,Use file-based routing,使用基于文件的路由,Create routes by adding files in app directory,通过在 app 目录添加文件创建路由,page.tsx for routes layout.tsx for layouts,路由使用 page.tsx 布局使用 layout.tsx,Manual route configuration,手动路由配置,app/blog/[slug]/page.tsx,app/blog/[slug]/page.tsx,Custom router setup,自定义路由设置,中等 | Medium,https://nextjs.org/docs/app/building-your-application/routing
3,路由 | Routing,Colocate related files,相关文件放在一起,Keep components styles tests with their routes,将组件、样式、测试与路由放在一起,Component files alongside page.tsx,组件文件与 page.tsx 放在一起,Separate components folder,独立的 components 文件夹,app/dashboard/_components/,app/dashboard/_components/,components/dashboard/,components/dashboard/,低 | Low,
4,路由 | Routing,Use route groups for organization,使用路由组进行组织,Group routes without affecting URL,分组路由而不影响 URL,Parentheses for route groups,使用圆括号创建路由组,Nested folders affecting URL,嵌套文件夹影响 URL,(marketing)/about/page.tsx,(marketing)/about/page.tsx,marketing/about/page.tsx,marketing/about/page.tsx,低 | Low,https://nextjs.org/docs/app/building-your-application/routing/route-groups
5,路由 | Routing,Handle loading states,处理加载状态,Use loading.tsx for route loading UI,使用 loading.tsx 显示路由加载 UI,loading.tsx alongside page.tsx,loading.tsx 与 page.tsx 放在一起,Manual loading state management,手动管理加载状态,app/dashboard/loading.tsx,app/dashboard/loading.tsx,useState for loading in page,页面中使用 useState 管理加载,中等 | Medium,https://nextjs.org/docs/app/building-your-application/routing/loading-ui-and-streaming
6,路由 | Routing,Handle errors with error.tsx,使用 error.tsx 处理错误,Catch errors at route level,在路由级别捕获错误,error.tsx with reset function,使用带 reset 函数的 error.tsx,try/catch in every component,每个组件使用 try/catch,app/dashboard/error.tsx,app/dashboard/error.tsx,try/catch in page component,页面组件中使用 try/catch,高 | High,https://nextjs.org/docs/app/building-your-application/routing/error-handling
7,渲染 | Rendering,Use Server Components by default,默认使用服务端组件,Server Components reduce client JS bundle,服务端组件减少客户端 JS 包大小,Keep components server by default,默认保持组件为服务端组件,Add 'use client' unnecessarily,不必要地添加 'use client',export default function Page(),export default function Page(),('use client') for static content,静态内容使用 ('use client'),高 | High,https://nextjs.org/docs/app/building-your-application/rendering/server-components
8,渲染 | Rendering,Mark Client Components explicitly,明确标记客户端组件,'use client' for interactive components,交互组件使用 'use client',Add 'use client' only when needed,仅在需要时添加 'use client',Server Component with hooks/events,服务端组件使用 hooks/事件,('use client') for onClick useState,onClick 和 useState 使用 ('use client'),No directive with useState,使用 useState 不加指令,高 | High,https://nextjs.org/docs/app/building-your-application/rendering/client-components
9,渲染 | Rendering,Push Client Components down,将客户端组件下推,Keep Client Components as leaf nodes,保持客户端组件为叶子节点,Client wrapper for interactive parts only,仅交互部分使用客户端包装器,Mark page as Client Component,将页面标记为客户端组件,<InteractiveButton/> in Server Page,服务端页面中使用 <InteractiveButton/>,('use client') on page.tsx,page.tsx 使用 ('use client'),高 | High,
10,渲染 | Rendering,Use streaming for better UX,使用流式传输提升用户体验,Stream content with Suspense boundaries,使用 Suspense 边界流式传输内容,Suspense for slow data fetches,慢数据获取使用 Suspense,Wait for all data before render,渲染前等待所有数据,<Suspense><SlowComponent/></Suspense>,<Suspense><SlowComponent/></Suspense>,await allData then render,await allData 然后渲染,中等 | Medium,https://nextjs.org/docs/app/building-your-application/routing/loading-ui-and-streaming
11,渲染 | Rendering,Choose correct rendering strategy,选择正确的渲染策略,SSG for static SSR for dynamic ISR for semi-static,静态用 SSG 动态用 SSR 半静态用 ISR,generateStaticParams for known paths,已知路径使用 generateStaticParams,SSR for static content,静态内容使用 SSR,export const revalidate = 3600,export const revalidate = 3600,fetch without cache config,fetch 无缓存配置,中等 | Medium,
12,数据获取 | DataFetching,Fetch data in Server Components,在服务端组件中获取数据,Fetch directly in async Server Components,在异步服务端组件中直接获取,async function Page() { const data = await fetch() },async function Page() { const data = await fetch() },useEffect for initial data,初始数据使用 useEffect,const data = await fetch(url),const data = await fetch(url),useEffect(() => fetch(url)),useEffect(() => fetch(url)),高 | High,https://nextjs.org/docs/app/building-your-application/data-fetching
13,数据获取 | DataFetching,Configure caching explicitly (Next.js 15+),明确配置缓存 (Next.js 15+),Next.js 15 changed defaults to uncached for fetch,Next.js 15 将 fetch 默认改为不缓存,Explicitly set cache: 'force-cache' for static data,静态数据明确设置 cache: 'force-cache',Assume default is cached (it's not in Next.js 15),假设默认缓存 (Next.js 15 中不是),fetch(url { cache: 'force-cache' }),fetch(url { cache: 'force-cache' }),fetch(url) // Uncached in v15,fetch(url) // v15 中不缓存,高 | High,https://nextjs.org/docs/app/building-your-application/upgrading/version-15
14,数据获取 | DataFetching,Deduplicate fetch requests,去重 fetch 请求,React and Next.js dedupe same requests,React 和 Next.js 自动去重相同请求,Same fetch call in multiple components,多个组件中相同的 fetch 调用,Manual request deduplication,手动去重请求,Multiple components fetch same URL,多个组件获取相同 URL,Custom cache layer,自定义缓存层,低 | Low,
15,数据获取 | DataFetching,Use Server Actions for mutations,数据变更使用 Server Actions,Server Actions for form submissions,表单提交使用 Server Actions,action={serverAction} in forms,表单中使用 action={serverAction},API route for every mutation,每个变更都创建 API 路由,<form action={createPost}>,<form action={createPost}>,<form onSubmit={callApiRoute}>,<form onSubmit={callApiRoute}>,中等 | Medium,https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations
16,数据获取 | DataFetching,Revalidate data appropriately,适当地重新验证数据,Use revalidatePath/revalidateTag after mutations,变更后使用 revalidatePath/revalidateTag,Revalidate after Server Action,Server Action 后重新验证,'use client' with manual refetch,使用 'use client' 手动重新获取,revalidatePath('/posts'),revalidatePath('/posts'),router.refresh() everywhere,到处使用 router.refresh(),中等 | Medium,https://nextjs.org/docs/app/building-your-application/caching#revalidating
17,图片 | Images,Use next/image for optimization,优化使用 next/image,Automatic image optimization and lazy loading,自动图片优化和懒加载,<Image> component for all images,所有图片使用 <Image> 组件,<img> tags directly,直接使用 <img> 标签,<Image src={} alt={} width={} height={}>,<Image src={} alt={} width={} height={}>,<img src={}/>,<img src={}/>,高 | High,https://nextjs.org/docs/app/building-your-application/optimizing/images
18,图片 | Images,Provide width and height,提供宽度和高度,Prevent layout shift with dimensions,使用尺寸防止布局偏移,width and height props or fill,width 和 height 属性或 fill,Missing dimensions,缺少尺寸,<Image width={400} height={300}/>,<Image width={400} height={300}/>,<Image src={url}/>,<Image src={url}/>,高 | High,
19,图片 | Images,Use fill for responsive images,响应式图片使用 fill,Fill container with object-fit,使用 object-fit 填充容器,fill prop with relative parent,fill 属性配合相对定位父元素,Fixed dimensions for responsive,响应式使用固定尺寸,"<Image fill className=""object-cover""/>","<Image fill className=""object-cover""/>",<Image width={window.width}/>,<Image width={window.width}/>,中等 | Medium,
20,图片 | Images,Configure remote image domains,配置远程图片域名,Whitelist external image sources,白名单外部图片源,remotePatterns in next.config.js,在 next.config.js 中使用 remotePatterns,Allow all domains,允许所有域名,remotePatterns: [{ hostname: 'cdn.example.com' }],remotePatterns: [{ hostname: 'cdn.example.com' }],domains: ['*'],domains: ['*'],高 | High,https://nextjs.org/docs/app/api-reference/components/image#remotepatterns
21,图片 | Images,Use priority for LCP images,LCP 图片使用 priority,Mark above-fold images as priority,将折叠上方图片标记为 priority,priority prop on hero images,首屏图片使用 priority 属性,All images with priority,所有图片都使用 priority,<Image priority src={hero}/>,<Image priority src={hero}/>,<Image priority/> on every image,每个图片都使用 <Image priority/>,中等 | Medium,
22,字体 | Fonts,Use next/font for fonts,字体使用 next/font,Self-hosted fonts with zero layout shift,自托管字体零布局偏移,next/font/google or next/font/local,使用 next/font/google 或 next/font/local,External font links,外部字体链接,import { Inter } from 'next/font/google',import { Inter } from 'next/font/google',"<link href=""fonts.googleapis.com""/>","<link href=""fonts.googleapis.com""/>",中等 | Medium,https://nextjs.org/docs/app/building-your-application/optimizing/fonts
23,字体 | Fonts,Apply font to layout,在布局中应用字体,Set font in root layout for consistency,在根布局中设置字体以保持一致,className on body in layout.tsx,在 layout.tsx 的 body 上使用 className,Font in individual pages,在各个页面中设置字体,<body className={inter.className}>,<body className={inter.className}>,Each page imports font,每个页面导入字体,低 | Low,
24,字体 | Fonts,Use variable fonts,使用可变字体,Variable fonts reduce bundle size,可变字体减少包大小,Single variable font file,单个可变字体文件,Multiple font weights as files,多个字重作为独立文件,Inter({ subsets: ['latin'] }),Inter({ subsets: ['latin'] }),Inter_400 Inter_500 Inter_700,Inter_400 Inter_500 Inter_700,低 | Low,
25,元数据 | Metadata,Use generateMetadata for dynamic,动态元数据使用 generateMetadata,Generate metadata based on params,基于参数生成元数据,export async function generateMetadata(),导出 async function generateMetadata(),Hardcoded metadata everywhere,到处硬编码元数据,generateMetadata({ params }),generateMetadata({ params }),export const metadata = {},export const metadata = {},中等 | Medium,https://nextjs.org/docs/app/building-your-application/optimizing/metadata
26,元数据 | Metadata,Include OpenGraph images,包含 OpenGraph 图片,Add OG images for social sharing,添加社交分享的 OG 图片,opengraph-image.tsx or og property,使用 opengraph-image.tsx 或 og 属性,Missing social preview images,缺少社交预览图片,opengraph: { images: ['/og.png'] },opengraph: { images: ['/og.png'] },No OG configuration,无 OG 配置,中等 | Medium,
27,元数据 | Metadata,Use metadata API,使用 metadata API,Export metadata object for static metadata,导出 metadata 对象设置静态元数据,export const metadata = {},导出 const metadata = {},Manual head tags,手动 head 标签,export const metadata = { title: 'Page' },export const metadata = { title: 'Page' },<head><title>Page</title></head>,<head><title>Page</title></head>,中等 | Medium,
28,API,Use Route Handlers for APIs,API 使用路由处理器,app/api routes for API endpoints,app/api 路由作为 API 端点,app/api/users/route.ts,使用 app/api/users/route.ts,pages/api for new projects,新项目使用 pages/api,export async function GET(request),export async function GET(request),export default function handler,export default function handler,中等 | Medium,https://nextjs.org/docs/app/building-your-application/routing/route-handlers
29,API,Return proper Response objects,返回正确的 Response 对象,Use NextResponse for API responses,API 响应使用 NextResponse,NextResponse.json() for JSON,JSON 使用 NextResponse.json(),Plain objects or res.json(),普通对象或 res.json(),return NextResponse.json({ data }),return NextResponse.json({ data }),return { data },return { data },中等 | Medium,
30,API,Handle HTTP methods explicitly,明确处理 HTTP 方法,Export named functions for methods,导出命名函数处理方法,Export GET POST PUT DELETE,导出 GET POST PUT DELETE,Single handler for all methods,单个处理器处理所有方法,export async function POST(),export async function POST(),switch(req.method),switch(req.method),低 | Low,
31,API,Validate request body,验证请求体,Validate input before processing,处理前验证输入,Zod or similar for validation,使用 Zod 或类似工具验证,Trust client input,信任客户端输入,const body = schema.parse(await req.json()),const body = schema.parse(await req.json()),const body = await req.json(),const body = await req.json(),高 | High,
32,中间件 | Middleware,Use middleware for auth,认证使用中间件,Protect routes with middleware.ts,使用 middleware.ts 保护路由,middleware.ts at root,根目录下的 middleware.ts,Auth check in every page,每个页面检查认证,export function middleware(request),export function middleware(request),if (!session) redirect in page,页面中 if (!session) redirect,中等 | Medium,https://nextjs.org/docs/app/building-your-application/routing/middleware
33,中间件 | Middleware,Match specific paths,匹配特定路径,Configure middleware matcher,配置中间件 matcher,config.matcher for specific routes,特定路由使用 config.matcher,Run middleware on all routes,所有路由运行中间件,matcher: ['/dashboard/:path*'],matcher: ['/dashboard/:path*'],No matcher config,无 matcher 配置,中等 | Medium,
34,中间件 | Middleware,Keep middleware edge-compatible,保持中间件 Edge 兼容,Middleware runs on Edge runtime,中间件运行在 Edge 运行时,Edge-compatible code only,仅使用 Edge 兼容代码,Node.js APIs in middleware,中间件中使用 Node.js APIs,Edge-compatible auth check,Edge 兼容的认证检查,fs.readFile in middleware,中间件中使用 fs.readFile,高 | High,
35,环境 | Environment,Use NEXT_PUBLIC prefix,使用 NEXT_PUBLIC 前缀,Client-accessible env vars need prefix,客户端可访问的环境变量需要前缀,NEXT_PUBLIC_ for client vars,客户端变量使用 NEXT_PUBLIC_,Server vars exposed to client,服务端变量暴露给客户端,NEXT_PUBLIC_API_URL,NEXT_PUBLIC_API_URL,API_SECRET in client code,客户端代码中使用 API_SECRET,高 | High,https://nextjs.org/docs/app/building-your-application/configuring/environment-variables
36,环境 | Environment,Validate env vars,验证环境变量,Check required env vars exist,检查必需的环境变量是否存在,Validate on startup,启动时验证,Undefined env at runtime,运行时环境变量未定义,if (!process.env.DATABASE_URL) throw,if (!process.env.DATABASE_URL) throw,process.env.DATABASE_URL (might be undefined),process.env.DATABASE_URL (可能未定义),高 | High,
37,环境 | Environment,Use .env.local for secrets,密钥使用 .env.local,Local env file for development secrets,本地环境文件存储开发密钥,.env.local gitignored,.env.local 加入 gitignore,Secrets in .env committed,.env 中的密钥被提交,.env.local with secrets,.env.local 存储密钥,.env with DATABASE_PASSWORD,.env 中存储 DATABASE_PASSWORD,高 | High,
38,性能 | Performance,Analyze bundle size,分析包大小,Use @next/bundle-analyzer,使用 @next/bundle-analyzer,Bundle analyzer in dev,开发环境使用包分析器,Ship large bundles blindly,盲目发布大包,ANALYZE=true npm run build,ANALYZE=true npm run build,No bundle analysis,不分析包,中等 | Medium,https://nextjs.org/docs/app/building-your-application/optimizing/bundle-analyzer
39,性能 | Performance,Use dynamic imports,使用动态导入,Code split with next/dynamic,使用 next/dynamic 代码分割,dynamic() for heavy components,重型组件使用 dynamic(),Import everything statically,静态导入所有内容,const Chart = dynamic(() => import('./Chart')),const Chart = dynamic(() => import('./Chart')),import Chart from './Chart',import Chart from './Chart',中等 | Medium,https://nextjs.org/docs/app/building-your-application/optimizing/lazy-loading
40,性能 | Performance,Avoid layout shifts,避免布局偏移,Reserve space for dynamic content,为动态内容预留空间,Skeleton loaders aspect ratios,骨架屏和宽高比,Content popping in,内容突然出现,"<Skeleton className=""h-48""/>","<Skeleton className=""h-48""/>",No placeholder for async content,异步内容无占位符,高 | High,
41,性能 | Performance,Use Partial Prerendering,使用部分预渲染,Combine static and dynamic in one route,在一个路由中结合静态和动态,Static shell with Suspense holes,静态外壳配合 Suspense 占位,Full dynamic or static pages,完全动态或静态页面,Static header + dynamic content,静态头部 + 动态内容,Entire page SSR,整个页面 SSR,低 | Low,https://nextjs.org/docs/app/building-your-application/rendering/partial-prerendering
42,链接 | Link,Use next/link for navigation,导航使用 next/link,Client-side navigation with prefetching,带预取的客户端导航,"<Link href=""""> for internal links",内部链接使用 <Link href="">,<a> for internal navigation,内部导航使用 <a>,"<Link href=""/about"">About</Link>","<Link href=""/about"">About</Link>","<a href=""/about"">About</a>","<a href=""/about"">About</a>",高 | High,https://nextjs.org/docs/app/api-reference/components/link
43,链接 | Link,Prefetch strategically,策略性预取,Control prefetching behavior,控制预取行为,prefetch={false} for low-priority,低优先级使用 prefetch={false},Prefetch all links,预取所有链接,<Link prefetch={false}>,<Link prefetch={false}>,Default prefetch on every link,每个链接默认预取,低 | Low,
44,链接 | Link,Use scroll option appropriately,适当使用 scroll 选项,Control scroll behavior on navigation,控制导航时的滚动行为,scroll={false} for tabs pagination,选项卡和分页使用 scroll={false},Always scroll to top,始终滚动到顶部,<Link scroll={false}>,<Link scroll={false}>,Manual scroll management,手动滚动管理,低 | Low,
45,配置 | Config,Use next.config.js correctly,正确使用 next.config.js,Configure Next.js behavior,配置 Next.js 行为,Proper config options,正确的配置选项,Deprecated or wrong options,已废弃或错误的选项,images: { remotePatterns: [] },images: { remotePatterns: [] },images: { domains: [] },images: { domains: [] },中等 | Medium,https://nextjs.org/docs/app/api-reference/next-config-js
46,配置 | Config,Enable strict mode,启用严格模式,Catch potential issues early,及早发现潜在问题,reactStrictMode: true,使用 reactStrictMode: true,Strict mode disabled,禁用严格模式,reactStrictMode: true,reactStrictMode: true,reactStrictMode: false,reactStrictMode: false,中等 | Medium,
47,配置 | Config,Configure redirects and rewrites,配置重定向和重写,Use config for URL management,使用配置进行 URL 管理,redirects() rewrites() in config,配置中使用 redirects() rewrites(),Manual redirect handling,手动重定向处理,redirects: async () => [...],redirects: async () => [...],res.redirect in pages,页面中使用 res.redirect,中等 | Medium,https://nextjs.org/docs/app/api-reference/next-config-js/redirects
48,部署 | Deployment,Use Vercel for easiest deploy,最简单部署使用 Vercel,Vercel optimized for Next.js,Vercel 为 Next.js 优化,Deploy to Vercel,部署到 Vercel,Self-host without knowledge,无知识自托管,vercel deploy,vercel deploy,Complex Docker setup for simple app,简单应用复杂 Docker 设置,低 | Low,https://nextjs.org/docs/app/building-your-application/deploying
49,部署 | Deployment,Configure output for self-hosting,自托管配置 output,Set output option for deployment target,为部署目标设置 output 选项,output: 'standalone' for Docker,Docker 使用 output: 'standalone',Default output for containers,容器使用默认 output,output: 'standalone',output: 'standalone',No output config for Docker,Docker 无 output 配置,中等 | Medium,https://nextjs.org/docs/app/building-your-application/deploying#self-hosting
50,安全 | Security,Sanitize user input,清理用户输入,Never trust user input,永远不要信任用户输入,Escape sanitize validate all input,转义、清理、验证所有输入,Direct interpolation of user data,直接插值用户数据,DOMPurify.sanitize(userInput),DOMPurify.sanitize(userInput),dangerouslySetInnerHTML={{ __html: userInput }},dangerouslySetInnerHTML={{ __html: userInput }},高 | High,
51,安全 | Security,Use CSP headers,使用 CSP 头,Content Security Policy for XSS protection,内容安全策略防御 XSS,Configure CSP in next.config.js,在 next.config.js 中配置 CSP,No security headers,无安全头,headers() with CSP,headers() 配置 CSP,No CSP configuration,无 CSP 配置,高 | High,https://nextjs.org/docs/app/building-your-application/configuring/content-security-policy
52,安全 | Security,Validate Server Action input,验证 Server Action 输入,Server Actions are public endpoints,Server Actions 是公开端点,Validate and authorize in Server Action,在 Server Action 中验证和授权,Trust Server Action input,信任 Server Action 输入,Auth check + validation in action,action 中进行认证检查 + 验证,Direct database call without check,无检查直接调用数据库,高 | High,
